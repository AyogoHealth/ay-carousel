{"version":3,"file":"angular1.js","sources":["../src/index.ts","../src/angular1.ts"],"sourcesContent":["export default class AyCarousel {\n  offset : any;\n  startX : number = 0;\n  startY : number = 0;\n  delta : any;\n  position : any;\n  currentTranslate : number;\n  lastTranslate : number;\n  callbacks : any = {};\n  cards : HTMLElement[];\n  cardWidth : number;\n  index : number = 0;\n  carousel : HTMLElement;\n  readonly SNAPPINESS : number = 40;\n  totalMove : any;\n  lastPos : any;\n  dots : HTMLElement[] = [];\n\n  constructor(carousel : HTMLElement) {\n    let CAROUSEL_STYLES = `\n    .progress-dots  {\n      text-align: center;\n      list-style: none;\n    }\n\n    .progress-dots > li {\n      border-radius: 50%;\n      background: white;\n      display: inline-block;\n      margin: 0 3px;\n      width: 10px;\n      height: 10px;\n      border: 1px solid black;\n    }\n\n    .progress-dots > li.active {\n      background: #45a2e2;\n    }\n\n    .card {\n      border-radius: 5px;\n      box-shadow: inset 0 0 1px black;\n      margin: 10px -1px;\n      float: left;\n      height: 80vw;\n      width: 80vw;\n      display: block;\n      background: white; \n      line-height: 150px;\n      font-size: 32px;\n      font-family: sans-serif;\n      text-align: center;\n    }\n    `\n\n    let carStyle = document.createElement('style');\n    carStyle.appendChild(document.createTextNode(CAROUSEL_STYLES));\n\n    let insertPoint : HTMLElement | null;\n    if (insertPoint = document.querySelector('link')) {\n        insertPoint.parentNode!.insertBefore(carStyle, insertPoint);\n    } else\n    if (insertPoint = document.querySelector('style')) {\n        insertPoint.parentNode!.insertBefore(carStyle, insertPoint);\n    } else\n    if (insertPoint = document.querySelector('head')) {\n        insertPoint.appendChild(carStyle);\n    } else {\n        document.appendChild(carStyle);\n    }\n\n    if(carousel) {\n      this.carousel = carousel;\n\n      this.carousel.setAttribute('style',  `position: relative; width: 30000px; display: inline-block;`);\n      this.carousel.addEventListener('touchstart', e => this.ondragstart(e));\n      this.carousel.addEventListener('mousedown', e => this.ondragstart(e));\n\n      this.cards = <any>this.carousel.children;\n\n      this.cardWidth = this.cards[0].offsetWidth + this.cards[0].offsetLeft;\n\n      this.carousel.addEventListener('transitionend', () => {\n        this.rescale();\n      });\n      this.rescale();\n      let dotContainer = document.createElement('ul');\n      dotContainer.classList.add('progress-dots');\n      \n      // Inserting before the carousel's nextSibling <=> Inserting after the carousel\n      if(this.carousel.parentElement) {\n        this.carousel.parentElement.insertBefore(dotContainer, this.carousel.nextSibling);\n      }\n\n      for(let i = 0; i < this.cards.length; i++) {\n        this.dots.push(document.createElement('li'));\n        dotContainer.insertAdjacentElement('beforeend', this.dots[i]);\n        this.dots[i].addEventListener('touchstart', _ => this.ondotclick(i));\n        this.dots[i].addEventListener('click', _ => this.ondotclick(i));\n        this.dots[i].tabIndex = i+1;\n      }\n      this.dots[this.index].className = 'active';\n      }\n  }\n\n  ondragstart(e) {\n    const touches =  e.touches ? e.touches[0] : e;\n    const {pageX, pageY} = touches;\n\n    const boundingRect = this.cards[this.index].getBoundingClientRect();\n    this.offset = {\n      x: pageX - boundingRect.left,\n      y: pageY - boundingRect.top\n    };\n\n    this.delta = {};\n\n    this.position = {\n      x: this.carousel.offsetLeft,\n      y: this.carousel.offsetTop\n    };\n\n    let edgeToCardDist = this.cards[this.index].getBoundingClientRect().left;\n    this.lastTranslate = this.carousel.getBoundingClientRect().left - edgeToCardDist;\n\n    this.totalMove = \n    this.startX = pageX;\n    this.startY = pageY;\n\n    this.callbacks.onmove = e => this.ondragmove(e);\n    this.callbacks.onend = e => this.ondragend(e);\n\n    this.totalMove = {\n      x: 0,\n      y: 0\n    }\n\n    this.lastPos = {\n      x: 0,\n      y: 0\n    }\n    \n    this.carousel.addEventListener('mousemove', this.callbacks.onmove);\n    this.carousel.addEventListener('touchmove', this.callbacks.onmove);\n    \n    this.carousel.addEventListener('touchend', this.callbacks.onend);\n    this.carousel.addEventListener('mouseup', this.callbacks.onend);\n    this.carousel.addEventListener('mouseleave', this.callbacks.onend);\n  }\n\n  ondragmove(e) {\n    const touches =  e.touches ? e.touches[0] : e;\n    const {pageX, pageY} = touches;\n    const move = {\n      x: this.startX - pageX,\n      y: this.startY - pageY\n    }\n\n    // Keep track of the total distance moved right/left in the move\n    this.totalMove.x += Math.abs(move.x - this.lastPos.x);\n    this.totalMove.y += Math.abs(move.y - this.lastPos.y);\n    \n    this.lastPos = {\n      x: move.x,\n      y: move.y\n    };\n\n    if(this.totalMove.x < 10 && this.totalMove.y < 10) {\n      return;\n    }\n\n    if(this.totalMove.x > this.totalMove.y) {\n      e.preventDefault();\n      this.delta = {\n        x: pageX - this.position.x,\n        y: pageY - this.position.y\n      };\n      const currentTranslate = this.delta.x + this.lastTranslate - this.offset.x;\n\n      this.translate(currentTranslate, 0);\n\n      let cardMidpoint = (this.cards[this.index].getBoundingClientRect().left + this.cards[this.index].getBoundingClientRect().right) / 2;\n      let viewportWidth = window.innerWidth;\n\n      if(cardMidpoint <= 0 + this.SNAPPINESS) {\n        // If card midpoint is close enough to left edge, decrement index\n        this.setIndex(this.index+1);\n      } else if(cardMidpoint > viewportWidth - this.SNAPPINESS) {\n        // If card midpoint is close enough to right edge, increment index\n        this.setIndex(this.index-1);\n      }\n    }\n  }\n\n  ondotclick(i) {\n    this.setIndex(i);\n    this.snap(this.index);\n  }\n\n  setIndex(index: number) {\n    const oldIndex = this.index;\n    \n    // Don't let index go outside bounds\n    this.index = Math.max(Math.min(index, this.cards.length-1), 0);\n\n    // Update dots, TODO: animate this\n    if(oldIndex !== this.index) {\n      this.dots[oldIndex].className = '';\n      this.dots[this.index].className = 'active';\n    }\n  }\n\n  snap(nextIndex? : number, direction? : string) {\n    if(direction) {\n      direction == 'right' ? nextIndex = this.index+1 : nextIndex = this.index-1;\n    } else if(nextIndex !== undefined) {\n      nextIndex = Math.min(Math.max(nextIndex, 0), this.cards.length - 1);\n    } else {\n      return;\n    }\n    this.index = nextIndex;\n\n    const container = <HTMLElement>this.carousel.parentElement;\n    const containerWidth = container.offsetWidth;\n    const containerMargin = parseInt(<string>window.getComputedStyle(container).marginLeft, 0);\n  \n    const card = this.cards[nextIndex];\n\n    // Width of container - Width of card = All the extra space\n    // Divide this by 2 to get desired distance from edge on either side of card\n    const edgeToCardDist = (containerWidth - card.offsetWidth)/2;\n    \n    // Translating to the left of the desired card, minus our desired edge dist\n    // Multiplied by -1 because we are translating to the right\n    const nextOffset = Math.min((card.offsetLeft - edgeToCardDist + containerMargin) * -1, 0);\n\n    // http://easings.net/#easeInOutCirc\n    const ease = 'cubic-bezier(0.785, 0.135, 0.15, 0.86)';\n    this.translate(nextOffset, 250, ease);\n  }\n\n  ondragend(e) {\n    this.position = {\n      x: e.target.offsetLeft,\n      y: e.target.offsetTop\n    };\n\n    this.totalMove = {\n      x: 0,\n      y: 0\n    };\n    this.carousel.removeEventListener('mousemove', this.callbacks.onmove);\n    this.carousel.removeEventListener('touchmove', this.callbacks.onmove);\n    \n    this.carousel.removeEventListener('touchend',this.callbacks.onend);\n    this.carousel.removeEventListener('mouseup', this.callbacks.onend);\n    this.carousel.removeEventListener('mouseleave', this.callbacks.onend);\n\n    // Snap to index, which has been set to the nearest card\n    this.snap(this.index, undefined);\n\n    this.rescale();\n  }\n\n  translate(x : number, length : number, fn? : string) {\n    this.carousel.style['transition'] = 'transform';\n    this.carousel.style['transitionDuration'] = `${length}ms`;\n    this.carousel.style['transform'] = `translate3d(${x}px,0px,0px)`;\n    if(fn) {\n      this.carousel.style['transitionTimingFunction'] = fn;\n    }\n    this.rescale();\n  }\n\n  percentVisible(card : HTMLElement) {\n    let cardRect = card.getBoundingClientRect();\n    let cardWidth = card.offsetWidth;\n    let frameWidth = window.innerWidth;\n\n    if((cardRect.left < 0 && cardRect.right < 0) || cardRect.left > frameWidth) {\n      return 0;\n    } else if(cardRect.left < 0) {\n      return cardRect.right/cardWidth;\n    } else if(cardRect.right > frameWidth) {\n      return (frameWidth - cardRect.left)/cardWidth;\n    } else {\n      return 1;\n    }\n  }\n\n  rescale() {\n    // Rescale current card and 2 cards in either direction\n    const from = Math.max(this.index-2 ,0);\n    const to = Math.min(this.index+2, this.cards.length-1)\n\n    for(let i = from; i<=to; i++) {\n      let scaler = Math.max(this.percentVisible(this.cards[i]), 0.9);\n\n      this.cards[i].style['transform'] = `scale(${scaler})`;\n      this.cards[i].style['transitionTimingFunction'] = 'ease';\n      this.cards[i].style['transitionDuration'] = `250ms`;\n    }\n  }\n}\n","/*! Copyright 2016 Ayogo Health Inc. */\n\nimport * as angular from 'angular';\nimport AyCarousel from './index';\n\nconst modName = 'ayCarousel';\n\nangular.module(modName, [])\n.directive('carousel', function() {\n    return {\n        restrict: 'E',\n        link: function(_$scope, $element) {\n            let el = $element[0] as HTMLElement;\n            new AyCarousel(el);\n        }\n    };\n});\n\nexport default modName;"],"names":["angular.module"],"mappings":"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"}